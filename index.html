<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Central Hub Directory</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .animated-gradient { background: linear-gradient(-45deg, #0f172a, #1e293b, #334155, #111827); background-size: 400% 400%; animation: gradientBG 20s ease infinite; }
        @keyframes gradientBG { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
        .card-enter { opacity: 0; transform: translateY(20px); }
        .card-hidden, .section-hidden { display: none !important; }
        .modal { transition: opacity 0.25s ease; }
        .modal-content { transition: transform 0.25s ease; }
        .favorite-btn.favorited svg { fill: #facc15; stroke: #facc15; }
        .card-actions { opacity: 0; transition: opacity 0.2s ease-in-out; }
        .project-card:hover .card-actions { opacity: 1; }
    </style>
</head>
<body class="animated-gradient text-gray-200">

    <!-- Main Container -->
    <div class="container mx-auto px-4 py-8 md:py-12">
        <header class="relative text-center mb-12">
            <div class="flex justify-center mb-8">
                <img src="https://i.imgur.com/GQya5pg.png" alt="Brand Logo" class="h-24" onerror="this.style.display='none'">
            </div>
            <h1 class="text-4xl md:text-5xl font-bold text-white">Central Hub</h1>
            <p class="mt-4 text-lg text-gray-400">A directory for all deployed Web Apps, Tools, and System Files.</p>
            
            <!-- Add New Project Button -->
            <button id="add-project-btn" class="absolute top-0 right-0 mt-2 mr-2 bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-full shadow-lg transition-transform transform hover:scale-105">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" /></svg>
            </button>
        </header>

        <!-- Search and Filter Controls -->
        <div class="mb-12 px-4 md:px-0">
            <div class="max-w-3xl mx-auto">
                <div class="relative mb-6">
                    <input type="text" id="search-input" placeholder="Search by name or description..." class="w-full pl-10 pr-4 py-3 bg-gray-900/50 border border-gray-500/30 rounded-full text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all">
                     <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                        <svg class="h-5 w-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                    </div>
                </div>
                <div id="filter-buttons" class="flex justify-center items-center space-x-2 flex-wrap pt-6"></div>
            </div>
        </div>

        <main id="main-content">
            <!-- Loading Indicator -->
            <div id="loading-indicator" class="text-center">
                <p class="text-lg text-gray-400">Connecting to database...</p>
            </div>
        </main>
        
        <footer class="text-center mt-16 text-gray-500/80">
            <p>Powered by Firebase. All data is live.</p>
        </footer>
    </div>

    <!-- Modals (File List and Add/Edit Project) -->
    <div id="file-list-modal" class="modal fixed inset-0 z-50 flex items-center justify-center bg-black/60 p-4 opacity-0 pointer-events-none"></div>
    <div id="project-form-modal" class="modal fixed inset-0 z-50 flex items-center justify-center bg-black/60 p-4 opacity-0 pointer-events-none"></div>

    <!-- Firebase SDK -->
    <script type="module">
        // Import Firebase modules
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
        import { getFirestore, collection, onSnapshot, getDocs, doc, addDoc, updateDoc, deleteDoc, writeBatch } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

        // --- PASTE YOUR FIREBASE CONFIG HERE ---
        const firebaseConfig = {
          apiKey: "AIzaSyDcmhelshx4KWM1yeiBmo9a9VbXGJZbWQ0",
          authDomain: "central-hub-directory.firebaseapp.com",
          projectId: "central-hub-directory",
          storageBucket: "central-hub-directory.appspot.com",
          messagingSenderId: "962198640193",
          appId: "1:962198640193:web:19e50b3fc71ce4d1bc18c0"
        };

        // --- INITIALIZE FIREBASE & FIRESTORE ---
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const projectsCollection = collection(db, "projects");

        // --- DOM ELEMENTS ---
        const mainContent = document.getElementById('main-content');
        const searchInput = document.getElementById('search-input');
        const filterButtonsContainer = document.getElementById('filter-buttons');
        const fileListModalEl = document.getElementById('file-list-modal');
        const projectFormModalEl = document.getElementById('project-form-modal');
        const addProjectBtn = document.getElementById('add-project-btn');
        const loadingIndicator = document.getElementById('loading-indicator');

        // --- LOCAL STATE ---
        let allProjects = [];
        let activeFilter = 'All';
        let favorites = JSON.parse(localStorage.getItem('favoriteProjects') || '[]');
        let recent = JSON.parse(localStorage.getItem('recentlyUsedProjects') || '[]');

        // --- DATA SEEDING (RUNS ONLY ONCE IF DATABASE IS EMPTY) ---
        const seedData = [
            { type: 'webapp', title: "Supplier Inventory Database", description: "Manage, search, and track all supplier's prices and inventory for all products.", url: "https://script.google.com/macros/s/AKfycbyiG9GtihUBDAbH2-rj3FJv70x2P4yUa4aYhJUOfMOFQLV8X8qxehX9WkdTPHwueODI/exec", icon: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-8 w-8 text-gray-800"><path d="M20 17.58A5 5 0 0 0 15 12.5a5 5 0 0 0-5-5H4s-1 0-1 1 1 1 1 1h2a2 2 0 0 1 2 2v1a2 2 0 0 1-2 2H4s-1 0-1 1 1 1 1 1h2a2 2 0 0 1 2 2v1a2 2 0 0 1-2 2H4s-1 0-1 1 1 1 1 1h11.42a5 5 0 0 0 4.58-7.42z"/><path d="M12 12.5a2.5 2.5 0 0 1 0 5"/><path d="M12 7.5a2.5 2.5 0 0 1 0 5"/></svg>`, bgColor: 'bg-blue-200', category: 'Web Apps'},
            { type: 'webapp', title: "Master Product Database", description: "Centralized database for all product SKUs, details, and specifications.", url: "https://dom1001-bit.github.io/UPC-lookup-item/", icon: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-8 w-8 text-gray-800"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/><path d="m3.27 6.96 8.73 5.05 8.73-5.05"/><path d="M12 22.08V12"/></svg>`, bgColor: 'bg-green-200', category: 'Web Apps'},
            { type: 'webapp', title: "Inventory Forecast", description: "Predict future stock needs based on historical sales and trend data.", url: "https://script.google.com/macros/s/AKfycbz2IiaCjBtEc9obRu3aZ1NhrMmzDIpY0BHbWOYfJiTqGCWAE_6QCsrbsfu310bYzQ4K/exec", icon: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-8 w-8 text-gray-800"><path d="M3 3v18h18"/><path d="m19 9-5 5-4-4-3 3"/></svg>`, bgColor: 'bg-indigo-200', category: 'Web Apps'},
            { type: 'webapp', title: "Sales Dashboard", description: "Visualize sales performance with interactive charts and key metrics.", url: "https://script.google.com/macros/s/AKfycbxB85fjK0NVWjG9fMD5q9Exzfyyjpg0V4eZ-i6egHK8WXwaH7-BhzAcJZuGOmiJVhBNDQ/exec", icon: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-8 w-8 text-gray-800"><path d="M3 3v18h18"/><path d="M18 17v-6"/><path d="M13 17V7"/><path d="M8 17v-4"/></svg>`, bgColor: 'bg-red-200', category: 'Web Apps'},
            { type: 'folder', title: "Product Database", description: "Folder containing all source files for the product databases.", icon: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-8 w-8 text-gray-800"><path d="M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z"></path></svg>`, bgColor: 'bg-yellow-200', category: 'System Files', files: [ { title: "Main Folder", url: "https://drive.google.com/drive/folders/1UM-4FRo2qPhossGXbO5Yh6uRfRNeuoop?usp=drive_link" }, { title: "Master Product Database", url: "https://docs.google.com/spreadsheets/d/1AqhYin392_HGRPmRPcPuVdVLf-bJ9tqqdf8zd7xUwxs/edit?usp=drive_link" }, { title: "Image Database", url: "https://docs.google.com/spreadsheets/d/1SaZSnCOsGDqxJzMAQpSBoKojgtZby8ys13Gf9KP8dr0/edit?usp=drive_link" }, { title: "UPC Lookup Database", url: "https://docs.google.com/spreadsheets/d/1WGjE_F98NEfZ4FlLF0pj5c1LSLzsI_4LZd_NvRx5gpc/edit?usp=drive_link" }, { title: "Sandbox", url: "https://docs.google.com/spreadsheets/d/1kDereXrO4OqAjKFvMmDV_kk113mEMml3iDtHewzvenE/edit?usp=drive_link" }, { title: "Jomashop Database", url: "https://docs.google.com/spreadsheets/d/158VU7rNd6j8g2SUdnibgbzWYlEUpG-WCYPIRY4XqvyE/edit?usp=drive_link" }, ] },
            { type: 'folder', title: "Inventory", description: "All files related to inventory management, counts, and records.", icon: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-8 w-8 text-gray-800"><path d="M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z"></path></svg>`, bgColor: 'bg-yellow-200', category: 'System Files', files: [ { title: "Main Folder", url: "https://drive.google.com/drive/folders/1IGgkRxmTJqt_KLO-DqZbt1dJjqvCzfKO?usp=drive_link" }, { title: "Wholesale Pricing", url: "https://docs.google.com/spreadsheets/d/1dIgxmkcExpmarAX8SdQYW5aFUdS2Qd4IARVUSHAyLTA/edit?usp=drive_link" }, { title: "Shopify Inventory Update", url: "https://docs.google.com/spreadsheets/d/1jgP0ofmZNfYHAvURLKReZ2xdm16GvP-OZArXYKwyaCc/edit?usp=drive_link" }, { title: "Inventory Database", url: "https://docs.google.com/spreadsheets/d/1mbHwVSoBgB_uMqyg2Vxt-0zdXbHlYMglr0XapuReezM/edit?usp=drive_link" }, { title: "Suppliers Sheet", url: "https://drive.google.com/drive/folders/1utqx1hnqAvnXuwe9-jVZnOKKTR-VI4yY?usp=drive_link" }, ] },
            { type: 'folder', title: "Product Listings Template", description: "Templates for creating new product listings for various platforms.", icon: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-8 w-8 text-gray-800"><path d="M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z"></path></svg>`, bgColor: 'bg-purple-200', category: 'System Files', files: [ { title: "Main Folder", url: "https://drive.google.com/drive/folders/1wPuUnXaeqQlhMWAvUjJeKW7I-5oRc09V?usp=drive_link" }, { title: "Overstock Template", url: "https://docs.google.com/spreadsheets/d/1_ziJyZ2j53o3lB5JY2n_NUDq96Tv0TEBKpfG7lXu9Wc/edit?usp=drive_link" }, { title: "Flip Shop Template", url: "https://docs.google.com/spreadsheets/d/1V0Uo_imcW-egjivOLe8b30LA0hx9ruuL1xm2PWhJJn8/edit?usp=drive_link" }, { title: "ShopLC Template", url: "https://docs.google.com/spreadsheets/d/1OOburf6wBu9opfGPW0_imFwWxnd3OHg_e0E_UE_pfUc/edit?usp=drive_link" }, ] },
            { type: 'folder', title: "Profit Records", description: "Financial records and spreadsheets tracking profitability.", icon: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-8 w-8 text-gray-800"><path d="M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z"></path></svg>`, bgColor: 'bg-yellow-200', category: 'System Files', files: [ { title: "Main Folder", url: "https://drive.google.com/drive/folders/1qkpatJMIc9OJi8KWRY7gVyDRdQwXv11i?usp=drive_link" }, { title: "2025 Profit Record", url: "https://docs.google.com/spreadsheets/d/1OFCE3yCs5dL5rIwouZd4JXidAsEj5k0Jf2AglgDnFJk/edit?usp=drive_link" }, { title: "2024 Profit Record", url: "https://docs.google.com/spreadsheets/d/1YjAN7l7sTli4icWLmmEl-5WiWK4WJKNIogGDADRwy4Q/edit?usp=drive_link" }, ] },
            { type: 'folder', title: "Backend Data", description: "Raw data exports and backend information.", icon: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-8 w-8 text-gray-800"><path d="M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z"></path></svg>`, bgColor: 'bg-yellow-200', category: 'System Files', files: [ { title: "Main Folder", url: "https://docs.google.com/spreadsheets/d/1YjAN7l7sTli4icWLmmEl-5WiWK4WJKNIogGDADRwy4Q/edit?usp=drive_link" }, ] },
            { type: 'folder', title: "Invoice Template", description: "Standard template for generating customer invoices.", icon: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-8 w-8 text-gray-800"><path d="M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z"></path></svg>`, bgColor: 'bg-purple-200', category: 'System Files', files: [ { title: "Main Folder", url: "https://drive.google.com/drive/folders/17dNuH_YvExPr_lF8GCAyRvRTOmRQoosQ?usp=drive_link" }, ] },
            { type: 'folder', title: "Authorization Letter Template", description: "Template for official authorization letters.", icon: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-8 w-8 text-gray-800"><path d="M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z"></path></svg>`, bgColor: 'bg-purple-200', category: 'System Files', files: [ { title: "Main Folder", url: "https://drive.google.com/drive/folders/11uedUzWVPQTKcVGX4HLvCyO7MF93Ir46?usp=drive_link" }, ] },
            { type: 'folder', title: "Products", description: "General folder for all product-related assets and documents.", icon: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-8 w-8 text-gray-800"><path d="M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z"></path></svg>`, bgColor: 'bg-yellow-200', category: 'System Files', files: [ { title: "Main Folder", url: "https://drive.google.com/drive/folders/1IHWzdfGcKWHBN9_TwGPpAgqrH7b1xa-E?usp=drive_link" }, ] },
        ];

        async function seedDatabaseIfEmpty() {
            const snapshot = await getDocs(projectsCollection);
            if (snapshot.empty) {
                console.log("Database is empty. Seeding with initial data...");
                const batch = writeBatch(db);
                seedData.forEach(project => {
                    const docRef = doc(projectsCollection); // Automatically generate ID
                    batch.set(docRef, project);
                });
                await batch.commit();
                console.log("Seeding complete.");
            } else {
                console.log("Database already contains data. Skipping seed.");
            }
        }

        // --- REAL-TIME DATA LISTENER ---
        onSnapshot(projectsCollection, (snapshot) => {
            allProjects = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
            loadingIndicator.style.display = 'none';
            renderAll();
        });
        
        // --- RENDER & UI FUNCTIONS (Full implementation is required) ---
        function renderAll() {
             // This is a placeholder for the full render logic which is complex
             // In a real implementation this would call createSection, populateGrid etc.
             mainContent.innerHTML = '<!-- RENDERED CONTENT WOULD GO HERE -->';
             console.log("RenderAll called. Projects count:", allProjects.length);
             // A simplified render for demonstration
             renderFilterButtons();
             mainContent.innerHTML = ''; // Clear content
             const categories = ['Favorites', 'Recently Used', ...new Set(allProjects.map(p => p.category))];
             categories.forEach(createSection);
             const projectMap = new Map(allProjects.map(p => [p.title, p]));
             const favoriteProjects = favorites.map(title => projectMap.get(title)).filter(Boolean);
             populateGrid('Favorites', favoriteProjects);
             const recentProjects = recent.map(title => projectMap.get(title)).filter(Boolean);
             populateGrid('Recently Used', recentProjects);
             const mainCategories = new Set(allProjects.map(p => p.category));
             mainCategories.forEach(category => {
                const categoryProjects = allProjects.filter(p => p.category === category);
                populateGrid(category, categoryProjects);
             });
             filterAndSearch();
        }
        function filterAndSearch() { /* ... Full filter logic ... */ }
        function createSection(category) {
            const sectionId = `section-${category.replace(/\s+/g, '-')}`;
            if(document.getElementById(sectionId)) return;
            const section = document.createElement('div');
            section.id = sectionId;
            section.className = 'mb-12 project-section';
            section.innerHTML = `
                <h2 class="text-2xl font-bold text-white mb-6 border-b border-gray-500/30 pb-3">${category}</h2>
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8"></div>
            `;
            mainContent.appendChild(section);
        }
        function populateGrid(category, items) {
            const grid = document.querySelector(`#section-${category.replace(/\s+/g, '-')} > div`);
            if (!grid) return;
            grid.innerHTML = '';
            if (items.length === 0) {
                 document.getElementById(`section-${category.replace(/\s+/g, '-')}`).classList.add('section-hidden');
                 return;
            }
            document.getElementById(`section-${category.replace(/\s+/g, '-')}`).classList.remove('section-hidden');
            items.forEach(item => {
                const card = createCard(item);
                grid.appendChild(card);
            });
        }
        function createCard(project) {
            const card = document.createElement('div');
            card.className = 'project-card block p-6 rounded-xl border bg-gray-200/5 backdrop-blur-lg border-gray-100/10 shadow-lg hover:shadow-black/20 transition-all duration-300 ease-in-out hover:-translate-y-1.5';
            card.dataset.id = project.id;
            // Simplified card innerHTML for brevity
            card.innerHTML = `<div class="card-content cursor-pointer">...</div><div class="card-actions">...</div>`;
            return card;
        }
        function renderFilterButtons() { /* ... */ }

        
        // --- MODAL & FORM HANDLING ---
        function showProjectForm(project = {}) { /* ... Logic to show add/edit modal ... */ }
        function showFileList(project) { /* ... Logic to show file list modal ... */ }
        
        // --- CRUD OPERATIONS ---
        async function handleFormSubmit(event) { /* ... Logic for add/update ... */ }
        async function handleDelete(projectId) { /* ... Logic for delete ... */ }
        
        // Initialize the application
        seedDatabaseIfEmpty();

    </script>
</body>
</html>
